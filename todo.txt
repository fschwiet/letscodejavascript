TODO:
inline statusChecker

    rename _monitoring.slow.js -> _monitoring.smoke.js
      run .smoke tests as part of release, and before slow tests in regular test runs.

    write a smoke test that can login and logout with the links in _layout
      -> will need to store current hostname/port somehow so it can be passed to google (header?)
      -> verify can enter & exit from different urls (/ and /status)

    add local strategy that can be used to login from test
    add test similar to smoke test making sure this works

  


GOALS
- deploy to own server


tentative deployment plan

  * To check a commit is ready to deploy, from commit A to B, we verify database migrations and mark the commit in a special branch:
    1.  checkout into a new directory to B
    2.  npm build
    3.  write config file
    3.  create test database running migrations to B
    4.  checkout commit A
    5.  run integration tests.  (verifies the schema migrations won't break running code)
    5.  checkout commit B
    5.  run integration tests   (verifies integration tests)
    5.  migrate database backwards to A
    5.  checkout commit A
    5.  run integration tests   (verifies we can roll back)
    5.  migrate database forward to B
    5.  checkout commit B
    5.  run integration tests (verifies)
    6.  add a commit, included in special git branch.  Commit message should indicate the version tested against.
    *  Might need to enforce these same steps are taken for releases, 

  * To deploy a commit:
    1.  pull solution into a new directory
    2.  npm build
    3.  copy config file from (sourceDir)\production.config.js to (deploymentDir)\config.js
      -> modify fileUpload_path
    3.  run database migrations (old code must work against new schema)
    4.  configure IIS to use that folder from 127.0.0.n where n != 1
    5.  Verify status page loads successfully
    4.  configure IIS to use that folder from wildcard domain
 

TODO
- install MySQL on deployment target
- 
- verify the MySQL setup works
- get VPN working
- clean install of Windows 8 on mini-server
    - install node, npm
    - MySQL
- verify everything runs from miniserver


- set up domain name

